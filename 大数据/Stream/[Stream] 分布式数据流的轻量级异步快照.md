---
layout: post
author: sjf0115
title: Stream 分布式数据流的轻量级异步快照.md
date: 2018-03-02 18:04:01
tags:
  - Stream

categories: Stream
---

### 1. 概述

目前已知的确保有状态处理系统上的 `exactly-once` 语义的方法依赖于执行状态的全局一致快照。但是，存在两个主要缺点，使得它们在实时流处理时效率低下。同步快照技术会停止分布式计算的执行，以便获得整体状态的一致视图。此外，持久化存储所有传输中的记录以及算子状态，这会导致比所需的快照要更大。

因此，提出了一种新的分布式快照的算法，这是一种适用于现代数据流执行引擎的轻量级算法，可最大限度地减少空间需求，让快照发生时对系统的影响降到最低。这种算法不会停止流处理，它只会引入很少的运行时间开销，而且对于整个无环图的拓扑结构，只对有状态的算子进行快照，因此快照的大小也会占用很小的空间。该算法不会对执行产生重大影响，保证线性可伸缩性，并且可以在频繁的快照下正常运行。

这里所说的新型的快照算法，既适用于有向无环图，也适用于有向有环图。本文重点关注在有向无环图中的应用，即在 `Apache Flink` 中的异步屏障快照（Asynchronous Barrier Snapshotting (ABS)）。

### 2. Apache Flink System

`Apache Flink` 围绕通用运行时引擎进行架构，可以统一处理批处理和流式作业。Flink 中的作业被编译成任务的有向图。数据元素从外部数据源获取，并以流水线方式通过任务图。任务持续不断的操作基于接收到的输入的内部状态，并产生新的输出。












































原文:
