
### 2. 用途

Geohashes的主要用途是：

(1) 作为唯一的标识符。

(2) 表示一个点数据，例如在数据库中存储表示一个点。

(3) Geohashes也被建议用于地理标记。

在数据库中使用时，被geohash化的数据的结构有两个优点。 首先，由geohash索引的数据将具有连续切片中给定矩形区域的所有点（切片的数量取决于所需的精度以及存在geohash“故障线”）。 这对于查询单个索引比多索引查询更容易或更快的数据库系统特别有用。 其次，这个索引结构可以用于快速而又脏的邻近搜索：最接近的点往往是最接近的地理杂乱之一。

### 3. 设计

以哈希值`ezs42`为例，这里是如何解码为十进制的经度和纬度。

第一步是使用以下字符映射从32位解码：


该操作产生`01101 11111 11000 00100 00010`。假设在左侧从0开始计数，偶数位取经度码（0111110000000），而奇数位取纬度码（101111001001）。


### 3.1 根据经纬度计算GeoHash二进制编码




纬度:

bit|min|mid|max
---|---|---|---
1|-90.0|0.0|90.0
0|0.0|45.0|90.0
1|0.0|22.5|45.0
1|22.5|33.75|45.0
1|33.75|39.375|45.0
0|39.375|42.1875|45.0
0|39.375|40.78125|42.1875
1|39.375|40.078125|40.78125
0|40.078125|40.4296875|40.78125
0|40.078125|40.25390625|40.4296875

经度:

bit|min|mid|max
---|---|---|---
1|-180.0|0.0|180.0
1|0.0|90.0|180.0
0|90.0|135.0|180.0
1|90.0|112.5|135.0
0|112.5|123.75|135.0
0|112.5|118.125|123.75
1|112.5|115.3125|118.125
0|115.3125|116.71875|118.125
1|115.3125|116.015625|116.71875
1|116.015625|116.3671875|116.71875


纬度:40.081419
编码二进制:1011100100
经度:
编码二进制:1101001011




























![](http://img.blog.csdn.net/20171026101315516?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvU3VubnlZb29uYQ==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast)


POI: 116.615,40.054
北京首都国际机场3号航站楼C区 116.614989,40.054538


(1) 10米

40.0555 116.615

40.0554 116.615

wx4gveuknqqk

wx4gveu7w7y2

前缀为7

(2) 100米

40.054 116.615
40.055 116.615

wx4gves7qqy2
wx4gveu3q3nq

前缀为6

(3) 1000米
40.04 116.615
40.05 116.615

wx4gv9h3ykyr
wx4gvduknmn7

前缀为5

(4) 10000米
40.1 116.615
40.0 116.615

wx4ujeurqmy3
wx4gt9u2ykqq

前缀为3







测试:

用户A:116.591366,40.071987      wx4gu
用户B:116.591967,40.107577      wx4uh
T1航站楼:116.587847,40.081313   wx4uh

A-T距离: 1078米
B-T距离: 2937米




飞机场	通辽	中国	43.5587040532,122.21694902	43.5643416154,122.223576754
通辽机场	通辽	中国	43.559485,122.209364	43.565173589036,122.21597442431

酒泉机场(敦煌机场)	酒泉	wp5kmrfhe39q	40.166117	94.805049	40.16542386405119	94.80391337341389	40.172383892588	94.811414651433



ddd
