

很多有状态流应用程序的常见需求是能够控制应用程序状态的访问时间以及何时删除它。这篇文章介绍了在1.6.0版本添加到Flink的状态生命周期时间（TTL）功能。

下面我们概述了新的状态TTL功能的动机并讨论了其用例。此外，我们将展示如何使用和配置它，并解释Flink如何使用TTL内部管理状态。这篇文章还展望了对未来的改进和扩展。

### 1. 介绍Flink有状态流处理

任何实时流应用程序都包括有状态操作。Flink为容错状态流处理提供了许多强大的功能。用户可以选择维护状态的不同状态原语（原子值，列表，映射）和后端（堆内存，RocksDB）。 处理函数中的应用程序逻辑可以访问和修改状态。 通常，状态与密钥相关联，允许类似于密钥/值存储的可伸缩处理和存储。 Apache Flink透明地管理状态分布（包括对扩展或扩展的支持），并定期执行检查点，以便在出现故障时恢复作业，具有一次性状态一致性保证。

在本博文的其余部分中，我们使用有状态应用程序的示例，该应用程序在上次登录时为每个用户提取用户登录事件和存储流，以改善常访访问者的体验。

















原文:[State TTL for Apache Flink: How to Limit the Lifetime of State](https://www.ververica.com/blog/state-ttl-for-apache-flink-how-to-limit-the-lifetime-of-state)
